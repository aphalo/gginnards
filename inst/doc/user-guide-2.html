<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Pedro J. Aphalo" />

<meta name="date" content="2018-07-05" />

<title>User Guide: 2 Manipulation of plot layers</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>

</head>

<body>




<h1 class="title toc-ignore">User Guide: 2 Manipulation of plot layers</h1>
<h3 class="subtitle"><em>‘gginnards’ 0.0.1</em></h3>
<h4 class="author"><em>Pedro J. Aphalo</em></h4>
<h4 class="date"><em>2018-07-05</em></h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#preliminaries">Preliminaries</a></li>
<li><a href="#exploring-how-ggplots-are-stored">Exploring how ggplots are stored</a></li>
<li><a href="#manipulation-of-plot-layers">Manipulation of plot layers</a></li>
<li><a href="#other-manipulations">Other manipulations</a><ul>
<li><a href="#replacing-scales-coordinates-whole-themes-and-data.">Replacing scales, coordinates, whole themes and data.</a></li>
<li><a href="#editing-theme-elements">Editing theme elements</a></li>
<li><a href="#removing-unused-data">Removing unused data</a></li>
</ul></li>
</ul>
</div>

<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The functions described here are not expected to be useful in everyday plotting as one can simply change the order in which layers are added to a ggplot. However, if one uses high level methods or functions that automatically produce a full plot using ‘ggplot2’ internally, one may need to add, move or delete layers so as to profit from such canned methods and retain enough flexibility.</p>
<p>Some time ago I needed to manipulate the layers of a <code>ggplot</code>, and found a matching question in <a href="\url%7Bhttps://stackoverflow.com/questions/13407236/remove-a-layer-from-a-ggplot2-chart%7D">matching question in Stackoverflow</a>. I used the answers found in Stackoverflow as the starting point for writing the functions described in this vignette.</p>
<p>In a <code>ggplot</code> object, layers reside in a list, and their positions in the list determine the plotting order when generating the graphical output. The Grammar of Graphics treats the list of layers as a <em>stack</em> using only <em>push</em> operations. In other words, always the most recently added layer resides at the end of the list, and over-plots all layers previously added. The functions described in this vignette allow overriding the <strong>normal</strong> syntax at the cost of breaking the expectations of the grammar. These functions are, as told above, to be used only in exceptional cases. This notwithstanding, they are rather easy to use. The user interface is consistent across all of them. Moreover, they are designed to return objects that are identical to objects created using the normal syntax rules of the Grammar of Graphics.</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>delete_layers()</code></td>
<td>delete one or more layers</td>
</tr>
<tr class="even">
<td><code>append_layers()</code></td>
<td>append layers at a specific position</td>
</tr>
<tr class="odd">
<td><code>move_layers()</code></td>
<td>move layers to an absolute position</td>
</tr>
<tr class="even">
<td><code>shift_layers()</code></td>
<td>move layers to a relative position</td>
</tr>
<tr class="odd">
<td><code>which_layers()</code></td>
<td>obtain the index positions of layers</td>
</tr>
<tr class="even">
<td><code>extract_layers()</code></td>
<td>extract matched or indexed layers</td>
</tr>
<tr class="odd">
<td><code>num_layers()</code></td>
<td>obtain number of layers</td>
</tr>
<tr class="even">
<td><code>top_layer()</code></td>
<td>obtain position of top layer</td>
</tr>
<tr class="odd">
<td><code>bottom_layer()</code></td>
<td>obtain position of bottom layer</td>
</tr>
</tbody>
</table>
<p>Although their definitions do not rely on code internal to ‘ggplot2’, they rely on the internal structure of objects belonging to class <code>gg</code> and <code>ggplot</code>. Consequently, long-term backwards and forward compatibility cannot be guaranteed, or even expected.</p>
</div>
<div id="preliminaries" class="section level2">
<h2>Preliminaries</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(gginnards)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(tibble)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(magrittr)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">library</span>(stringr)</a></code></pre></div>
<p>We generate some artificial data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">4321</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># generate artificial data</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">my.data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="dt">group =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>], <span class="dt">each =</span> <span class="dv">30</span>)),</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  <span class="dt">panel =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], <span class="dt">each =</span> <span class="dv">60</span>)),</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="dv">40</span>),</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  <span class="dt">unused =</span> <span class="st">&quot;garbage&quot;</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">)</a></code></pre></div>
<p>We change the default theme to an uncluttered one.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">old_theme &lt;-<span class="st"> </span><span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())</a></code></pre></div>
<p>We generate a plot to be used later to demonstrate the use of the functions.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(my.data, <span class="kw">aes</span>(group, y)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw">stat_summary</span>(<span class="dt">fun.data =</span> mean_se, <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">size =</span> <span class="fl">1.3</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>panel, <span class="dt">scales =</span> <span class="st">&quot;free_x&quot;</span>, <span class="dt">labeller =</span> label_both)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">p</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="exploring-how-ggplots-are-stored" class="section level2">
<h2>Exploring how ggplots are stored</h2>
<p>To display textual information about a <code>gg</code> object we use method <code>summary()</code>, while methods <code>print()</code> and <code>plot()</code> will display the actual plot.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">summary</span>(p)</a></code></pre></div>
<pre><code>## data: group, panel, y, unused [120x4]
## mapping:  x = ~group, y = ~y
## faceting: &lt;ggproto object: Class FacetWrap, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetWrap, Facet, gg&gt;
## -----------------------------------
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity 
## 
## geom_pointrange: na.rm = FALSE
## stat_summary: fun.data = function (x, mult = 1) 
## {
##     x &lt;- stats::na.omit(x)
##     se &lt;- mult * sqrt(stats::var(x)/length(x))
##     mean &lt;- mean(x)
##     data.frame(y = mean, ymin = mean - se, ymax = mean + se)
## }, fun.y = NULL, fun.ymax = NULL, fun.ymin = NULL, fun.args = list(), na.rm = FALSE
## position_identity</code></pre>
<p>Layers in a ggplot object are stored in a list as nameless members. This means that they have to be accessed using numerical indexes, and that we need to use some indirect way of finding the indexes correspiónding to the layers of interest.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">names</span>(p<span class="op">$</span>layers)</a></code></pre></div>
<pre><code>## NULL</code></pre>
<p>The output of <code>summary()</code> is compact.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">summary</span>(p<span class="op">$</span>layers)</a></code></pre></div>
<pre><code>##      Length Class         Mode       
## [1,] 11     LayerInstance environment
## [2,] 11     LayerInstance environment</code></pre>
<p>The default <code>print()</code> method for a list of layers displays only a small part of the information in a layer.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">print</span>(p<span class="op">$</span>layers)</a></code></pre></div>
<pre><code>## [[1]]
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity 
## 
## [[2]]
## geom_pointrange: na.rm = FALSE
## stat_summary: fun.data = function (x, mult = 1) 
## {
##     x &lt;- stats::na.omit(x)
##     se &lt;- mult * sqrt(stats::var(x)/length(x))
##     mean &lt;- mean(x)
##     data.frame(y = mean, ymin = mean - se, ymax = mean + se)
## }, fun.y = NULL, fun.ymax = NULL, fun.ymin = NULL, fun.args = list(), na.rm = FALSE
## position_identity</code></pre>
<p>To see all the fields, we need to use <code>str()</code>, which we use here for a single layer.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">str</span>(p<span class="op">$</span>layers[[<span class="dv">1</span>]])</a></code></pre></div>
<pre><code>## Classes 'LayerInstance', 'Layer', 'ggproto', 'gg' &lt;ggproto object: Class LayerInstance, Layer, gg&gt;
##     aes_params: list
##     compute_aesthetics: function
##     compute_geom_1: function
##     compute_geom_2: function
##     compute_position: function
##     compute_statistic: function
##     data: waiver
##     draw_geom: function
##     finish_statistics: function
##     geom: &lt;ggproto object: Class GeomPoint, Geom, gg&gt;
##         aesthetics: function
##         default_aes: uneval
##         draw_group: function
##         draw_key: function
##         draw_layer: function
##         draw_panel: function
##         extra_params: na.rm
##         handle_na: function
##         non_missing_aes: size shape colour
##         optional_aes: 
##         parameters: function
##         required_aes: x y
##         setup_data: function
##         use_defaults: function
##         super:  &lt;ggproto object: Class Geom, gg&gt;
##     geom_params: list
##     inherit.aes: TRUE
##     layer_data: function
##     map_statistic: function
##     mapping: NULL
##     position: &lt;ggproto object: Class PositionIdentity, Position, gg&gt;
##         compute_layer: function
##         compute_panel: function
##         required_aes: 
##         setup_data: function
##         setup_params: function
##         super:  &lt;ggproto object: Class Position, gg&gt;
##     print: function
##     show.legend: NA
##     stat: &lt;ggproto object: Class StatIdentity, Stat, gg&gt;
##         aesthetics: function
##         compute_group: function
##         compute_layer: function
##         compute_panel: function
##         default_aes: uneval
##         extra_params: na.rm
##         finish_layer: function
##         non_missing_aes: 
##         parameters: function
##         required_aes: 
##         retransform: TRUE
##         setup_data: function
##         setup_params: function
##         super:  &lt;ggproto object: Class Stat, gg&gt;
##     stat_params: list
##     super:  &lt;ggproto object: Class Layer, gg&gt;</code></pre>
</div>
<div id="manipulation-of-plot-layers" class="section level2">
<h2>Manipulation of plot layers</h2>
<p>We start by using <code>which_layers()</code> as it produces simply a vector of indexes into the list of layers. The third statement is useless here, but demonstrates how layers are selected in all the functions described in this document.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">which_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>)</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">which_layers</span>(p, <span class="st">&quot;StatSummary&quot;</span>)</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">which_layers</span>(p, <span class="dt">idx =</span> 1L)</a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>We can also easily extract matching layers with <code>extract_layers()</code>. Here one layer is returned, and displayed using the default <code>print()</code> method. Method <code>str()</code> can also be used as shown above.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">extract_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>)</a></code></pre></div>
<pre><code>## [[1]]
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity</code></pre>
<p>With <code>delete_layers()</code> we can remove layers from a plot, selecting them using the match to a class, as shown here, or by a positional index. This was shown above for <code>which_layers()</code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">delete_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">delete_layers</span>(p, <span class="dt">idx =</span> 1L)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">delete_layers</span>(p, <span class="st">&quot;StatSummary&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>With <code>move_layers()</code> we can alter the stacking order of layers. The layers to move are selected in the same way as in the examples above, while <code>position</code> gives where to move the layers to. Two character strings, <code>&quot;top&quot;</code> and <code>&quot;bottom&quot;</code> are accepted as <code>position</code> argument, as well as <code>integer</code>s. In the later case, the layer(s) is/are appended after the supplied position with reference to the list of layers not being moved.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">move_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>, <span class="dt">position =</span> <span class="st">&quot;top&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>The equivalent operation using a relative position. A positive value for <code>shift</code> is interpreted as an upward displacement and a negative one as downwards displacement.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">shift_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>, <span class="dt">shift =</span> <span class="op">+</span><span class="dv">1</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Here we show how to add a layer behind all other layers.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">append_layers</span>(p, <span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&quot;orange&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>), <span class="dt">position =</span> <span class="st">&quot;bottom&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>It is also possible to append the new layer immediately above an arbitrary existing layer using a numeric index, which as shown here can be also obtained by matching to a class name. In this example we insert a new layer in-between two layers already present in the plot. As with the <code>+</code> operator of the Grammar of Graphics, <code>object</code> also accepts a list of layers as argument (no example shown).</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">append_layers</span>(p, <span class="dt">object =</span> <span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&quot;orange&quot;</span>, <span class="dt">size =</span> <span class="dv">1</span>), </a>
<a class="sourceLine" id="cb29-2" data-line-number="2">              <span class="dt">position =</span> <span class="kw">which_layers</span>(p, <span class="st">&quot;GeomPoint&quot;</span>))</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Annotations add layers, so they can be manipulated in the same way as other layers.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">p1 &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="dt">label =</span> <span class="st">&quot;text label&quot;</span>, <span class="dt">x =</span> <span class="fl">1.1</span>, <span class="dt">y =</span> <span class="dv">0</span>, <span class="dt">hjust =</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">p1</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">delete_layers</span>(p1, <span class="st">&quot;GeomText&quot;</span>)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
</div>
<div id="other-manipulations" class="section level2">
<h2>Other manipulations</h2>
<p>We very briefly mention in this section how to manipulate other elements of of <code>ggplot</code> objects. The output from the examples in this section is not included is this vignette.</p>
<p>For replacing other elements in <code>ggplot</code> objects we can in general use methods defined in ‘ggplot2’.</p>
<div id="replacing-scales-coordinates-whole-themes-and-data." class="section level3">
<h3>Replacing scales, coordinates, whole themes and data.</h3>
<p>Other elements that are normally <em>added</em> and <em>replaced</em> in plot with operator <code>+</code>, such as scales. To the default data stored in a <code>ggplot</code> object operator <code>%+%</code> is used.</p>
</div>
<div id="editing-theme-elements" class="section level3">
<h3>Editing theme elements</h3>
<p>Method <code>summary()</code> is available for themes.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">theme_bw</span>())</a></code></pre></div>
<p>However, to see the actual values stored, we need to use <code>str()</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">str</span>(<span class="kw">theme_bw</span>())</a></code></pre></div>
<p>Themes can be modified using <code>theme()</code>. See the ‘ggplot2’ documentation for details.</p>
</div>
<div id="removing-unused-data" class="section level3">
<h3>Removing unused data</h3>
<p>When the data frame passed as data contains many columns and rows, it is stored in whole, even the data columns not mapped to any aesthetic. In many cases this does not matter, but in the case of big datasets, the use of RAM can rapidly add up, and in addition the printing of each plot can slow down significantly. The reason for storing the whole data set is that it is always possible to add layers and consequently only the user can know which variables can be removed or not.</p>
<p>One obvious way out is for the user the select the required columns and pass only these to the ‘ggplot’ constructor. A less efficient alternative, but possibly easier to use for some users, is for users to drop the unused variables when they consider that a plot is ready. We show here how to do this.</p>
<p>To simplify such objects we need to find which variables are mapped to aesthetics and which are not. Here is a naive attempt at handling the possibiliy of mappings to expressions involving computations and multiple variables per mapping, and facets. This is naive in that it ignores mapping within layers and variables used for faceting.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">mapped.vars &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw">gsub</span>(<span class="st">&quot;[~*</span><span class="ch">\\</span><span class="st">%^]&quot;</span>, <span class="st">&quot; &quot;</span>, <span class="kw">as.character</span>(p<span class="op">$</span>mapping)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="st">  </span><span class="kw">str_split</span>(<span class="kw">boundary</span>(<span class="st">&quot;word&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4"><span class="st">  </span><span class="kw">unlist</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="st">  </span><span class="kw">c</span>(<span class="kw">names</span>(p<span class="op">$</span>facet<span class="op">$</span>params<span class="op">$</span>facets))</a></code></pre></div>
<p>We need also to find which variables are present in the data.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">data.vars &lt;-<span class="st"> </span><span class="kw">names</span>(p<span class="op">$</span>data)</a></code></pre></div>
<p>Find which variables in data are not used, and delete them from the data.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">unused.vars &lt;-<span class="st"> </span><span class="kw">setdiff</span>(data.vars, <span class="kw">c</span>(mapped.vars))</a>
<a class="sourceLine" id="cb36-2" data-line-number="2">keep.idxs &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="op">!</span>data.vars <span class="op">%in%</span><span class="st"> </span>unused.vars)</a></code></pre></div>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">p1 &lt;-<span class="st"> </span>p</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">p1<span class="op">$</span>data &lt;-<span class="st"> </span>p<span class="op">$</span>data[ , keep.idxs]</a></code></pre></div>
<p>For a data set this small, removing a single column saves little space.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">object.size</span>(my.data)</a></code></pre></div>
<pre><code>## 5088 bytes</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">object.size</span>(p)</a></code></pre></div>
<pre><code>## 11384 bytes</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">object.size</span>(p1)</a></code></pre></div>
<pre><code>## 10352 bytes</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">names</span>(my.data)</a></code></pre></div>
<pre><code>## [1] &quot;group&quot;  &quot;panel&quot;  &quot;y&quot;      &quot;unused&quot;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">names</span>(p<span class="op">$</span>data)</a></code></pre></div>
<pre><code>## [1] &quot;group&quot;  &quot;panel&quot;  &quot;y&quot;      &quot;unused&quot;</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">names</span>(p1<span class="op">$</span>data)</a></code></pre></div>
<pre><code>## [1] &quot;group&quot; &quot;panel&quot; &quot;y&quot;</code></pre>
<p>The plot has not changed.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">p1</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>We can assemble all the code into a function for convenience, and expand the code to also recognize mappings within layers and variables used in faceting. Such a<br />
function, only cursorily tested is included in the package as <code>drop_vars()</code>. Given its design the most likely failure mode is keeping too many variables rather than removing too many.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">drop_vars</span>(p)</a></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>In principle, one could have expected R not to make a copy of the data in memory for each <code>ggplot</code> object, however, the ‘ggplot2’ code seems to modify the argument passed to its <code>data</code> parameter triggering a real copy operation. In any case during printing and when saved to disk, even as part of the environment, avoiding to carry along unused data can be beneficial. Of course, removing unused data means that it will not be available if we want to add more layers to the same saved ggplot object after dropping unused variables.</p>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
